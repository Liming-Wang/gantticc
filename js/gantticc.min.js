function Project(t,e){if(-1===t)$.extend(this,e);else if("undefined"==typeof t)this.pid="",this.title="My Awesome Project",this.start=(new Date).toISOString(),this.end=new Date((new Date).getTime()+42336e5).toISOString(),this.tasks=[],this.addDummyTask();else{if(this.pid=t,null===localStorage["project"+this.getPid()])throw new UserException("invalid project id");$.extend(this,JSON.parse(localStorage["project"+this.getPid()])),this.loadTasks()}}var gchart,gantticc=gantticc||{};Project.prototype={getPid:function(){return"0"==this.pid?"":this.pid},save:function(){var t={title:this.title,start:this.start,end:this.end};if(gantticc.firebaseId){var e=new Firebase(gantticc.firebaseUrl+gantticc.firebaseId+"/"+this.pid);t.pid=this.pid,e.update(t)}else localStorage["project"+this.getPid()]=JSON.stringify(t)},"delete":function(){if(gantticc.firebaseId){var t=new Firebase(gantticc.firebaseUrl+gantticc.firebaseId+"/"+this.pid);t.remove()}else localStorage.removeItem("project"+this.getPid()),localStorage.removeItem("tasks"+this.getPid())},load:function(){if(null===localStorage["project"+this.getPid()])throw new UserException("invalid project id");$.extend(this,JSON.parse(localStorage["project"+this.getPid()]))},loadTasks:function(){this.tasks=JSON.parse(localStorage["tasks"+this.getPid()])},saveTasks:function(){if(gantticc.firebaseId){var t=new Firebase(gantticc.firebaseUrl+gantticc.firebaseId+"/"+this.pid);t.update({tasks:this.tasks})}else localStorage["tasks"+this.getPid()]=JSON.stringify(this.tasks)},getTask:function(t){for(var e=0;e<this.tasks.length;e++){var a=this.tasks[e];if(a.tid==t)return a}return null},deleteTask:function(t){for(var e=0;e<this.tasks.length;e++){var a=this.tasks[e];if(a.tid==t)break}this.tasks.splice(e,1),this.saveTasks()},addTask:function(t){this.tasks.push(t),this.saveTasks()},addDummyTask:function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this.tasks.push({tid:"1",title:"New Task",color:"gray",start:e.toISOString(),end:new Date(e.getTime()+1728e5).toISOString(),row:"1",notes:"Random notes"})},getTasksOnDate:function(t){for(var e=[],a=t.getTime(),c=0;c<this.tasks.length;c++){var n=this.tasks[c],s=new Date(n.start).getTime(),i=new Date(n.end).getTime();if(new Date(n.start).dst()||(s+=36e5),new Date(n.end).dst()||(i+=36e5),a>=s&&i>=a)e.push($.extend(!0,{},n));else{var r=new Date(n.start);t.getFullYear()==r.getFullYear()&&t.getMonth()==r.getMonth()&&t.getDate()==r.getDate()&&e.push($.extend(!0,{},n))}}return e},getTasksInWeek:function(t){for(var e=[],a=0;a<this.tasks.length;a++){var c=this.tasks[a],n=new Date(c.start),s=n.getWeekNumber(n);s==t&&e.push($.extend(!0,{},c))}return e},getDataForHeatMap:function(t){var e=[],a=new Date(this.start).getTime(),c=new Date(this.end).getTime(),n=864e5;"week"===t&&(n=7*n);for(var s=a;c>=s;s+=n){var i,r=new Date(s);if(!r.dst()){var o=r.getTime();r=new Date(o+36e5)}i="day"===t?this.getTasksOnDate(r):this.getTasksInWeek(r.getWeekNumber(r)),e.push({date:s,tasks:i})}return e}},gantticc.initUI=function(){$("#gantt").css("min-height",gantticc.getHeight()),$("#gmask").css({height:gantticc.getHeight(),top:$("#topbar").height()}),$(".datepickr").datepicker(),$(".datepickr").on("click",function(t){$(t.target).datepicker("show")}),$(".datepickr").on("changeDate",function(t){$(t.target).datepicker("hide")}),$("a[rel=tooltip]").tooltip(),$("button[rel=tooltip]").tooltip(),$("#mtab").on("click",function(){var t=$("#mtab").offset().left,e=$("#mtab").offset().top;$("#mselects").css({left:t,top:e+2}),$("#mselects").show()}),$("#project_info_modal").on("show",function(){"0"==gantticc.project.pid?$("#prj_inmd_dfprj").text("This project is currently the default project."):$("#prj_inmd_dfprj").html('<button class="btn" onclick="gantticc.setDefaultProject(\''+gantticc.project.pid+"');\">Make this the default project</button>"),$("#prj_ifmd_ptcnt").text(gantticc.project.tasks.length),$("#prj_ifmd_expdata").text(gantticc.exportData("google_cal"))}),$(document).bind("mouseup touchstart",function(t){var e=$("#mselects");e.is(t.target)||0!==e.has(t.target).length||e.hide()}),$(document).on("keydown",function(t){27==t.keyCode?($("#task_form").is(":visible")&&task_form_cancel(),$("#mselects").is(":visible")&&$("#mselects").hide()):72==t.keyCode?gantticc.listenKey&&!$("#task_form").is(":visible")&&project_heatmap():68==t.keyCode?gantticc.listenKey&&!$("#task_form").is(":visible")&&set_scale("day"):87==t.keyCode?gantticc.listenKey&&!$("#task_form").is(":visible")&&set_scale("week"):82==t.keyCode&&gantticc.listenKey&&gantticc.resized&&(gchart.destroy(),gantticc.render(),gantticc.resized=!1)}),$("input[type=text]").bind("focus",function(){gantticc.listenKey=!1}).bind("blur",function(){gantticc.listenKey=!0}),$("textarea").bind("focus",function(){gantticc.listenKey=!1}).bind("blur",function(){gantticc.listenKey=!0}),$(window).on("resize",function(){gantticc.resized=!0})},gantticc.init=function(){if(gantticc.loaded=!1,gantticc.authenticated=!1,gantticc.resized=!1,gantticc.listenKey=!0,gantticc.scale="day",gantticc.heatmap={},gantticc.projects=[],gantticc.project=null,gantticc.maxProjCount=5,gantticc.colors=["null","gray","blue","orange"],gantticc.colorValues={gray:["#e5e5e5","#f2f2f2"],blue:["#bee1ef","#d4effc"],orange:["#ff944d","#ffa964"]},gantticc.firebaseUrl="https://gantticc.firebaseio.com/",gantticc.firebasePasscode="",gantticc.passcodeAttempts=0,gantticc.siteUrl="http://mmw.cx/g/app",gantticc.localstorage=1,"undefined"!=typeof Storage?gantticc.localstorage=1:(alert("Local storage not supported by your browser. If you wish to save your data, please save it online."),gantticc.localstorage=0),gantticc.firebaseId=gantticc.getParamFromURL("fbdb"),gantticc.firebaseId){gantticc.getFirebasePasscode(gantticc.firebaseId);var t=new Firebase(gantticc.firebaseUrl+gantticc.firebaseId);t.once("value",function(t){if(null==t.val())gantticc.firebaseId="",gantticc.loadDataFromLocalStorage();else{for(var e=t.val(),a=0;a<e.length;a++){var c=new Project(-1,e[a]);"0"===c.pid&&(gantticc.project=c),gantticc.projects.push(c)}gantticc.updateSharingStatus()}gantticc.render()})}else gantticc.firebaseId="",gantticc.loadDataFromLocalStorage(),gantticc.render()},gantticc.render=function(){$("#gantt").empty(),$("#gmask").show().css("opacity",1),gchart=bonsai.run(document.getElementById("gantt"),{url:"js/gchart.min.js?bustcache="+Math.random(),width:gantticc.getWidth(),height:gantticc.getHeight(),code:function(){stage.on("message:update_task",function(t){if("true"===t.cancel)return void(ganttClickLock=0);var e=null,a=0;for(a;a<gantticc.tasks.length&&(e=gantticc.tasks[a],e.tid!=t.tid);a++);null!=e&&("true"===t["delete"]?(gchart.deleteTaskAnim(e.group_asset),gantticc.tasks.splice(a,1)):(t.title=t.title,e.title_asset.attr("text",t.title),e.updateIndicatorIcon(t.notes),e.updateTaskColor(t.color)),ganttClickLock=0)}),stage.on("message:update_project",function(t){if(!(ganttClickLock>0)&&"undefined"!=typeof t.start_date){var e=new Date;t.scroll_date&&(e=new Date(t.scroll_date)),gchart.drawHeader(t.start_date,t.end_date),gchart.scrollToDate(e),gchart.updateCurrentUnit()}}),stage.on("message:init_tasks",function(t){ganttClickLock>0||(stage.sendMessage("mask_stage",{show:1}),setTimeout(function(){gchart.initTasks(t.tasks),stage.sendMessage("mask_stage",{})},300))}),stage.on("message:init_heatmap",function(t){ganttClickLock>0||(stage.sendMessage("mask_stage",{show:1}),setTimeout(function(){var e=gchart.getScrollDate();gchart.unit!==t.unit&&(gchart.unit=t.unit),gchart.drawHeader(t.start_date,t.end_date),gchart.updateCurrentUnit(1),gchart.initHeatMap({min:t.min,max:t.max,projects:t.data}),gchart.scrollToDate(e),stage.sendMessage("scroll_date",{date:e}),stage.sendMessage("mask_stage",{})},300))}),stage.on("message:scroll_to_date",function(t){var e=new Date(t.date);gchart.scrollToDate(e,1)}),stage.on("message:scroll_to_task",function(t){var e=t.task;if(parseInt(e.row)*GANTT_TASK_BLK_HGT>Math.floor(stage.height/2)){var a=parseInt(e.row)*GANTT_TASK_BLK_HGT-Math.floor(stage.height/2);a=Math.ceil(a/GANTT_TASK_BLK_HGT)*GANTT_TASK_BLK_HGT,gchart.scrollY(a)}else gchart.scrollY(gchart.y)}),stage.on("message:set_swatch",function(t){gchart.highlightTaskByColor(t.color,t.status)}),stage.on("message:set_scale",function(t){ganttClickLock>0||(stage.sendMessage("mask_stage",{show:1}),setTimeout(function(){var e=new Date;gchart.unit===t.unit?gchart.scrollToDate(e):(e=gchart.getScrollDate(),gchart.unit=t.unit,gchart.drawHeader(t.start_date,t.end_date),gchart.updateCurrentUnit(1),gchart.scrollToDate(e,1)),stage.sendMessage("scroll_date",{date:e}),stage.sendMessage("mask_stage",{})},300))}),stage.sendMessage("ready",{})}}),gchart.on("load",function(){gchart.on("message:ready",function(){if(gantticc.authenticated===!1&&gantticc.youShallNotPass()===!1)return void gchart.destroy();var t=new Date($("#project_startdate").val()).toISOString(),e=new Date($("#project_enddate").val()).toISOString(),a=new Date,c=$("#mtab").attr("value")?new Date($("#mtab").attr("value")):a,n=gantticc.project.getTasksOnDate(new Date);gchart.sendMessage("update_project",{start_date:t,end_date:e,scroll_date:c}),gchart.sendMessage("init_tasks",{tasks:gantticc.project.tasks}),n.length>0&&gchart.sendMessage("scroll_to_task",{task:n[0]}),gantticc.loaded||gantticc.showIntro(),gantticc.loaded=!0}),gchart.on("message:edit_task",function(t){var e=gantticc.project.getTask(t.tid);if(null!=e){$("#title_tid").val(e.tid),"New Task"===e.title?($("#title_txtfield").val(""),$("#title_txtfield").attr("placeholder","New Task")):($("#title_txtfield").val(e.title),$("#title_txtfield").attr("placeholder","")),e.color||(e.color="gray"),$("#task_color").val(e.color);for(var a=0;a<gantticc.colors.length;a++){var c=gantticc.colors[a];$("#task_color_"+c).removeClass("swatch_sel")}$("#task_color_"+e.color).addClass("swatch_sel"),$("#notes_txtfield").val(e.notes);var n=t.y+$("#topbar").height();$("#settings").is(":hidden")||(n+=$("#settings").height()),$("#task_form").css({top:n,left:t.x}),$("#task_form").show()}}),gchart.on("message:update_task",function(t){var e=gantticc.project.getTask(t.tid);null!=e&&(t.start&&(e.start=t.start),t.end&&(e.end=t.end),t.row&&(e.row=t.row),gantticc.project.saveTasks())}),gchart.on("message:new_task",function(t){gantticc.project.addTask(t.task)}),gchart.on("message:scroll_date",function(t){var e=new Date(t.date);gantticc.updateCurrentMonthBtn(e)}),gchart.on("message:update_heatmap",function(t){project_heatmap(t.unit)}),gchart.on("message:update_project",function(t){var e=new Date($("#mtab").attr("value"));project_load(t.pid.toString());var a=new Date(gantticc.project.start),c=new Date(gantticc.project.end);e>c||(a>e&&(e=a),gchart_scroll(e))}),gchart.on("message:mask_stage",function(t){t.show?$("#gmask").show().animate({opacity:1},300):$("#gmask").animate({opacity:0},300,function(){$("#gmask").hide()})})}),gantticc.applyCurrentProject()},gantticc.getColorValue=function(t){return t||(t="gray"),gantticc.colorValues[t][0]},gantticc.loadDataFromLocalStorage=function(){if(1==gantticc.localstorage)if(gantticc.loadAllProjects(),gantticc.projects.length>0){var t=gantticc.getParamFromURL("project");t||(t="0");for(var e=0;e<gantticc.projects.length;e++){var a=gantticc.projects[e];t===a.pid&&(gantticc.project=a)}}else{var a=new Project;gantticc.project=a,gantticc.projects.push(gantticc.project)}else gantticc.project=new Project},gantticc.youShallNotPass=function(t){if(-1!==gantticc.passcodeAttempts){if(!t){if(!gantticc.firebasePasscode)return gantticc.authenticated=!0,!0;var e=gantticc.getCookie(gantticc.firebaseId);return e==gantticc.firebasePasscode?gantticc.authenticated=!0:(gantticc.listenKey=!1,$("#project_passcode_modal").modal("show"),$("#passcode").focus()),gantticc.authenticated}var a=$("#passcode").val();a!=gantticc.firebasePasscode?($("#passcode").css("border-color","#b94a48"),gantticc.passcodeAttempts++,gantticc.passcodeAttempts>3&&(gantticc.passcodeAttempts=-1)):(gantticc.authenticated=!0,$("#project_passcode_modal").modal("hide"),gantticc.render(),gantticc.listenKey=!0,$("#passcodermbr").prop("checked")&&gantticc.setCookie(gantticc.firebaseId,gantticc.firebasePasscode,10))}},gantticc.applyCurrentProject=function(){$("#project_title_txtfield").val(gantticc.project.title),$("#project_startdate").datepicker("setValue",new Date(gantticc.project.start)),$("#project_enddate").datepicker("setValue",new Date(gantticc.project.end)),project_update(!1),gantticc.resetSwatch(),gantticc.resetHeatmap()},gantticc.loadAllProjects=function(){if(0!=gantticc.localstorage)for(var t=0;t<gantticc.maxProjCount;t++)try{var e=new Project(t.toString());gantticc.projects.push(e)}catch(a){break}},gantticc.updateProjectList=function(){var t=[];t.push('<li><a href="#" onclick="project_new();">Create New Project</a></li>'),t.push('<li class="divider"></li>');for(var e=0;e<gantticc.projects.length;e++){var a=gantticc.projects[e],c='<li><a href="#" onclick="project_load(\''+a.pid+"');\">";c+=a.pid===gantticc.project.pid?"<b>"+a.title+"</b>":a.title,c+="<span><span></a></li>",t.push(c)}$("#project_list").html(t.join(""))},gantticc.setCurrentProject=function(t){for(var e=0;e<gantticc.projects.length;e++){var a=gantticc.projects[e];a.pid===t&&(gantticc.project=a)}if(!gantticc.firebaseId)try{gantticc.project.load(),gantticc.project.loadTasks()}catch(c){gantticc.init()}gantticc.applyCurrentProject()},gantticc.deleteCurrentProject=function(){gantticc.project["delete"]();for(var t=0;t<gantticc.projects.length;t++){var e=gantticc.projects[t];if(e.pid==gantticc.project.pid)break}if(gantticc.projects.splice(t,1),0==gantticc.projects.length){var e=new Project;gantticc.project=e,gantticc.projects.push(gantticc.project)}else gantticc.project=gantticc.projects[0]},gantticc.getLiteralMonth=function(t){var e=["January","February","March","April","May","June","July","August","September","October","November","December"];return e[t]},gantticc.updateCurrentMonthBtn=function(t){$("#mtab").text(gantticc.getLiteralMonth(t.getMonth())),$("#mtab").attr("value",t.toISOString())},gantticc.updateJumpMonthMenu=function(t,e){t||(t=gantticc.project.start),e||(e=gantticc.project.end);for(var a=[],c=new Date(t),n=new Date(e),s=c.getFullYear();s<=n.getFullYear();s++){s!=c.getFullYear()&&a.push('<li class="disabled"><a>'+s+"</a></li>");for(var i=s==n.getFullYear()?n.getMonth():11,r=s==c.getFullYear()?c.getMonth():0,o=r;i>=o;o++){var g=a.length>0?1:c.getDate(),l='<li><a href="#" onclick="gchart_scroll(new Date('+s+","+o+","+g+'))">';l+=gantticc.getLiteralMonth(o)+"</a></li>",a.push(l)}}$("#mselects").html(a.join(""))},gantticc.addNewProject=function(){return gantticc.projects.length>=gantticc.maxProjCount?null:(gantticc.project.save(),gantticc.project.saveTasks(),gantticc.project=new Project,gantticc.project.title="New Project",gantticc.project.pid=gantticc.projects.length.toString(),gantticc.projects.push(gantticc.project),$("#project_title_txtfield").focus(),!0)},gantticc.exportData=function(t){if("google_cal"===t){var e=[];e.push("Subject,Start Date,End Date,Description");for(var a=0;a<gantticc.project.tasks.length;a++){var c=gantticc.project.tasks[a],n=c.start.split("T")[0];n.split("-").join("/");var s=c.end.split("T")[0];s.split("-").join("/"),e.push(c.title+","+n+","+s+","+c.notes)}return e.join("\n")}if("print"===t){for(var i=[],r=new Date(gantticc.project.start).getTime(),o=new Date(gantticc.project.end).getTime(),g=864e5,c=r;o>=c;c+=g){var l=new Date(c),d=gantticc.project.getTasksOnDate(l);if(d.length>0){i.push("<h4>"+l.toDateString()+"</h4>");for(var p="<ul>",a=0;a<d.length;a++)p+='<li><span class="tchbx"></span><span class="ttl">'+d[a].title+"</span></li>";p+="</ul>",i.push(p)}}return i.join("")}return""},gantticc.getParamFromURL=function(t){for(var e=window.location.search.substr(1),a=e.split("&"),c=0;c<a.length;c++){var n=a[c].split("=");if(n[0]===t)return n[1]}return""},gantticc.setDefaultProject=function(t){for(var e=null,a=null,c=0;c<gantticc.projects.length;c++){var n=gantticc.projects[c];n.pid===t&&(e=n),"0"===n.pid&&(a=n)}e&&a&&(a.pid=t,a.save(),a.saveTasks(),e.pid="0",e.save(),e.saveTasks(),$("#prj_inmd_dfprj").text("This project has been set as the default project."))},gantticc.resetSwatch=function(){for(var t=1;t<gantticc.colors.length;t++){var e=gantticc.colors[t],a=$(".swatch_"+e).next().first();a.addClass("swatch_checked")}},gantticc.resetHeatmap=function(){$("#heatmap_status").html("Heat Map").attr("value","")},gantticc.getAllTasksOnDate=function(t){for(var e=[],a=0;a<gantticc.projects.length;a++)$.merge(e,gantticc.projects[a].getTasksOnDate(t));return e},gantticc.getAllTasksInWeek=function(t){for(var e=[],a=0;a<gantticc.projects.length;a++)$.merge(e,gantticc.projects[a].getTasksInWeek(t));return e},gantticc.getWidth=function(){return $("#controls").width()},gantticc.getHeight=function(){var t=$(document).height()-$("#topbar").height();return $("#botbar").is(":visible")&&(t-=$("#botbar").height()),t},gantticc.openInNewWind=function(){var t=location.protocol+"//"+location.host+location.pathname+"?project="+gantticc.project.pid;window.open(t)},gantticc.shareToFirebase=function(){var t=$("#project_share_id").val(),e=new Firebase(gantticc.firebaseUrl+t);e.once("value",function(a){null==a.val()?(e.set(gantticc.projects,function(){var e=gantticc.siteUrl+"?fbdb="+t;$("#prj_share_link").text(e).show()}),$("#project_share_passcode").val()&&(gantticc.setFirebasePasscode(t,$("#project_share_passcode").val()),$("#project_share_passcode").parent().parent().addClass("success")),$("#project_share_id").parent().parent().removeClass("error").addClass("success")):($("#project_share_id").parent().parent().addClass("error"),$("#prj_sharefrm_output").html("That sharing ID has been used, pick another one."))})},gantticc.removeFromFirebase=function(){if(gantticc.firebaseId){var t=new Firebase(gantticc.firebaseUrl+gantticc.firebaseId);if(t.remove(),gantticc.firebasePasscode){var t=new Firebase(gantticc.firebaseUrl+"projects/"+gantticc.firebaseId);t.remove()}gantticc.firebaseId="",gantticc.save(),$("#rmfmfbdb").parent().append("<p>This project has been removed from server.</p>")}},gantticc.setFirebasePasscode=function(t,e){var a=new Firebase(gantticc.firebaseUrl+"projects"),c={};c[t]=e,a.update(c)},gantticc.getFirebasePasscode=function(t){var e=new Firebase(gantticc.firebaseUrl+"projects"),a=e.startAt(null,t);a.once("value",function(e){if(null==e.val())gantticc.firebasePasscode="";else{var a=e.val();gantticc.firebasePasscode=a[t]}})},gantticc.updateFirebasePasscode=function(){gantticc.authenticated&&(gantticc.setFirebasePasscode(gantticc.firebaseId,$("#pspasscd").val()),$("#pspasscd").parent().append('<span id="pspasscdok" class="help-inline">Passcode updated.</span>'),setTimeout(function(){$("#pspasscdok").remove()},2e3))},gantticc.updateSharingStatus=function(){if(gantticc.firebaseId){var t=gantticc.siteUrl+"?fbdb="+gantticc.firebaseId,e='<p>This gantticc is currently shared at: <code><a href="'+t+'">'+t+"</a></code></p>";if(e+='<form class="form-inline">',e+='<label for="pspasscd">Passcode: </label>\n',e+='<input type="password" class="input input-small" name="pspasscd" id="pspasscd" value="',gantticc.firebasePasscode)for(var a=0;a<gantticc.firebasePasscode.length;a++)e+="*";e+='" size="4" />\n',e+='<button class="btn" onclick="gantticc.updateFirebasePasscode();return false;">Update</button>',e+="</form>",e+="<p>To disable sharing, you need to delete data completely from server. But don't worry, you still have a local copy of your data.</p>",e+='<button id="rmfmfbdb" class="btn btn-danger" onclick="gantticc.removeFromFirebase();">Delete data from server</button>',$("#project_share_modal_body").html(e)}},gantticc.save=function(){if(0!=gantticc.localstorage)for(var t=0;t<gantticc.projects.length;t++)gantticc.projects[t].save(),gantticc.projects[t].saveTasks()},gantticc.showIntro=function(){gantticc.getCookie("firsttime").length<1&&$("#gantticc_help_modal").modal("show"),gantticc.setCookie("firsttime","no",10)},gantticc.setCookie=function(t,e,a){var c=new Date;c.setDate(c.getDate()+a);var n=escape(e)+(null==c?"":"; expires="+c.toUTCString());document.cookie=t+"="+n},gantticc.getCookie=function(t){var e,a,c,n=document.cookie.split(";");for(e=0;e<n.length;e++)if(a=n[e].substr(0,n[e].indexOf("=")),c=n[e].substr(n[e].indexOf("=")+1),a=a.replace(/^\s+|\s+$/g,""),a==t)return unescape(c);return""},gantticc.print=function(){$("#printwrap").html(gantticc.exportData("print")),window.print()},Date.prototype.getWeekNumber=function(t){t=new Date(t),t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));var e=new Date(t.getFullYear(),0,1),a=Math.ceil(((t-e)/864e5+1)/7);return a},Date.prototype.stdTimezoneOffset=function(){var t=new Date(this.getFullYear(),0,1),e=new Date(this.getFullYear(),6,1);return Math.max(t.getTimezoneOffset(),e.getTimezoneOffset())},Date.prototype.dst=function(){return this.getTimezoneOffset()<this.stdTimezoneOffset()};